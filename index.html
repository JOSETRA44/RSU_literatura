<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSU: Violencia de Género - UNSA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet">
    
    <!-- Three.js Import Map -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.166.1/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.166.1/examples/jsm/"
        }
    }
    </script>
    
    <style>
        /* Variables CSS para tema oscuro espacial */
        :root {
            --primary-purple: #9333ea;
            --primary-pink: #ec4899;
            --dark-bg: #050505;
            --dark-surface: #0a0a0a;
            --glass-bg: rgba(20, 20, 20, 0.7);
            --neon-glow: 0 0 20px rgba(147, 51, 234, 0.5);
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--dark-bg); 
            color: #e2e8f0; 
            overflow-x: hidden;
            scroll-behavior: smooth;
        }
        
        h1, h2, h3, .font-orbitron { 
            font-family: 'Orbitron', sans-serif; 
            font-weight: 900;
        }
        
        /* Efecto de texto neón ESTÁTICO (sin animación infinita) */
        .neon-text {
            text-shadow: 
                0 0 10px rgba(147, 51, 234, 0.8),
                0 0 20px rgba(236, 72, 153, 0.6),
                0 0 30px rgba(236, 72, 153, 0.4),
                0 0 40px rgba(147, 51, 234, 0.3);
        }
        
        /* Fondo de estrellas ESTÁTICO (sin animación infinita) */
        .star-bg {
            background-image: 
                radial-gradient(1px 1px at 20% 30%, white, transparent),
                radial-gradient(1px 1px at 60% 70%, white, transparent),
                radial-gradient(1px 1px at 80% 10%, white, transparent);
            background-size: 200% 200%;
        }
        
        /* Scrollbar personalizado */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(180deg, var(--primary-purple), var(--primary-pink)); 
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary-purple); }
        
        /* Panel de vidrio (glassmorphism) */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .glass-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(147, 51, 234, 0.3);
            color: white;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .glass-input:focus {
            background: rgba(0, 0, 0, 0.5);
            border-color: var(--primary-purple);
            outline: none;
            box-shadow: var(--neon-glow);
        }
        
        /* Animaciones de revelación */
        .reveal-element {
            opacity: 0;
            transform: translateY(50px);
            transition: all 1s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .reveal-element.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Título principal animado */
        .ml2 {
            font-weight: 900;
            font-size: clamp(2.5rem, 8vw, 7rem);
            line-height: 1.1;
            text-shadow: 
                0 0 20px rgba(147, 51, 234, 0.8),
                0 0 40px rgba(236, 72, 153, 0.5),
                0 0 60px rgba(236, 72, 153, 0.3);
        }
        
        .ml2 .letter {
            display: inline-block;
            line-height: 1em;
            will-change: transform, opacity;
        }
        
        /* Botones con animación de pulso suave */
        @keyframes buttonPulse {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(147, 51, 234, 0.4), 0 0 40px rgba(236, 72, 153, 0.2);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 30px rgba(147, 51, 234, 0.6), 0 0 60px rgba(236, 72, 153, 0.3);
                transform: scale(1.02);
            }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        
        .bubble-btn {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: buttonPulse 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }
        
        .bubble-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            background-size: 200% 100%;
            animation: shimmer 3s linear infinite;
        }
        
        .bubble-btn:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 0 40px rgba(147, 51, 234, 0.8), 0 0 80px rgba(236, 72, 153, 0.4);
            animation: none;
        }
        
        /* Cards con efecto 3D optimizado */
        .card-3d {
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            will-change: transform;
        }
        
        .card-3d:hover {
            transform: translateY(-10px);
        }
        
        /* Overlay del hero */
        .hero-overlay {
            background: linear-gradient(
                135deg,
                rgba(5, 5, 5, 0.95) 0%,
                rgba(88, 28, 135, 0.85) 50%,
                rgba(236, 72, 153, 0.75) 100%
            );
        }
        
        /* Canvas container para Three.js */
        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }
        
        #canvas-container canvas {
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .glow-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: radial-gradient(circle at 50% 50%,
                rgba(120, 50, 255, 0.05) 0%,
                rgba(80, 40, 200, 0.03) 40%,
                transparent 70%);
            mix-blend-mode: screen;
            z-index: 1;
        }
        
        /* Modal mejorado */
        #mediaModal {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        #mediaModal.open {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Efecto de máquina de escribir minimalista */
        .typewriter-container {
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #typewriter-text {
            text-align: center;
        }
        
        .typed-text {
            color: #e5e7eb;
        }
        
        .typewriter-cursor {
            color: #9333ea;
            animation: blink 1s step-end infinite;
            font-weight: 300;
            margin-left: 2px;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }
        
        /* Efectos de partículas - desactivado para mejor performance */
    </style>
</head>
<body class="bg-gray-950 text-gray-100">

    <!-- SECCIÓN 1: HERO CON FONDO 3D INTERACTIVO -->
    <header class="relative min-h-screen flex items-center justify-center text-white overflow-hidden">
        <div id="canvas-container"></div>
        <div class="glow-overlay"></div>
        <div class="hero-overlay absolute inset-0"></div>

        <div class="relative z-10 text-center px-4 py-20 max-w-6xl mx-auto w-full">
            <p class="text-purple-300 font-bold tracking-widest uppercase mb-6 text-sm md:text-base opacity-0 intro-anim">
                Responsabilidad Social Universitaria
            </p>
            
            <div class="ml2 mb-8 text-white uppercase px-4 max-w-5xl mx-auto neon-text">
                <h1 class="block">Violencia de</h1>
                <h1 class="block">Género</h1>
            </div>
            
            <div class="mb-10 opacity-0 intro-anim max-w-4xl mx-auto px-4">
                <div class="typewriter-container">
                    <p id="typewriter-text" class="text-lg md:text-2xl font-light text-gray-300 leading-relaxed tracking-wide font-mono">
                        <span class="typed-text"></span><span class="typewriter-cursor">|</span>
                    </p>
                </div>
            </div>
            
            <div class="flex flex-col sm:flex-row gap-6 justify-center opacity-0 intro-anim px-4">
                <a href="#recursos" class="bubble-btn bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 px-10 rounded-full transition duration-300 shadow-2xl shadow-purple-500/50 relative z-10">
                    <span class="flex items-center justify-center gap-3 relative z-10">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Ver Recursos
                    </span>
                </a>
                
                <a href="#participa" class="bubble-btn bg-purple-600 hover:bg-purple-700 text-white font-bold py-4 px-10 rounded-full transition duration-300 shadow-2xl shadow-purple-500/40 relative z-10">
                    <span class="relative z-10">Participar</span>
                </a>
                
                <a href="#muro" class="bubble-btn bg-transparent border-2 border-white hover:bg-white hover:text-gray-900 text-white font-bold py-4 px-10 rounded-full transition duration-300 relative z-10">
                    <span class="relative z-10">Ver Muro</span>
                </a>
            </div>
        </div>
    </header>

    <!-- SECCIÓN 2: CONTEXTO CON CARDS 3D -->
    <section class="py-20 px-4 bg-gradient-to-b from-gray-950 via-gray-900 to-gray-950">
        <div class="max-w-6xl mx-auto relative z-10">
            <div class="text-center mb-16 reveal-element">
                <h2 class="text-4xl md:text-6xl font-bold text-white mb-6 neon-text">
                    Manifestaciones en la Universidad
                </h2>
                <p class="text-lg md:text-xl text-gray-300 leading-relaxed max-w-3xl mx-auto">
                    La violencia de género no siempre es física. Identificamos tres ejes críticos en nuestra investigación local:
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1: Acoso Sexual -->
                <div class="card-3d glass-panel p-8 rounded-3xl hover:shadow-2xl transition-all duration-500 reveal-element border-t-4 border-purple-500">
                    <div class="w-20 h-20 bg-gradient-to-br from-purple-600 to-purple-800 rounded-full flex items-center justify-center mb-6 mx-auto transform hover:scale-110 transition-transform duration-300">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-4 text-center">Acoso Sexual</h3>
                    <p class="text-gray-300 leading-relaxed text-center">
                        Comentarios e insinuaciones no deseadas en entornos académicos que generan ambientes hostiles.
                    </p>
                </div>

                <!-- Card 2: Violencia Simbólica -->
                <div class="card-3d glass-panel p-8 rounded-3xl hover:shadow-2xl transition-all duration-500 reveal-element delay-100 border-t-4 border-purple-700">
                    <div class="w-20 h-20 bg-gradient-to-br from-purple-700 to-purple-900 rounded-full flex items-center justify-center mb-6 mx-auto transform hover:scale-110 transition-transform duration-300">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-4 text-center">Violencia Simbólica</h3>
                    <p class="text-gray-300 leading-relaxed text-center">
                        Desvalorización intelectual y estereotipos de carrera que limitan el desarrollo académico.
                    </p>
                </div>

                <!-- Card 3: Ciberacoso -->
                <div class="card-3d glass-panel p-8 rounded-3xl hover:shadow-2xl transition-all duration-500 reveal-element delay-200 border-t-4 border-pink-500">
                    <div class="w-20 h-20 bg-gradient-to-br from-pink-600 to-pink-800 rounded-full flex items-center justify-center mb-6 mx-auto transform hover:scale-110 transition-transform duration-300">
                        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-white mb-4 text-center">Ciberacoso</h3>
                    <p class="text-gray-300 leading-relaxed text-center">
                        Difusión de contenido íntimo o acoso en redes universitarias que vulnera la privacidad.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN 3: RECURSOS EDUCATIVOS -->
    <section id="recursos" class="py-20 px-4 bg-gray-900">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-16 reveal-element">
                <h2 class="text-4xl md:text-5xl font-bold text-white mb-4 neon-text">Material Educativo</h2>
                <p class="text-lg text-gray-300 mt-4 px-4">
                    Haz clic para visualizar nuestras infografías y recursos educativos.
                </p>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-8">
                <!-- Card 1: Info 1 -->
                <div class="glass-panel rounded-2xl overflow-hidden shadow-2xl hover:shadow-purple-500/50 transition-all duration-500 transform hover:-translate-y-2 reveal-element">
                    <div class="h-64 bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center cursor-pointer overflow-hidden group" onclick="openMediaModal('img/info1.png')">
                        <img src="img/info1.png" alt="Infografía 1" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500">
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-3 text-white">Conceptos y Datos</h3>
                        <p class="text-gray-400 text-sm mb-4">Definiciones clave, tipos de violencia y estadísticas actuales de Arequipa.</p>
                        <div class="flex items-center justify-center gap-4">
                            <button type="button" onclick="openMediaModal('img/info1.png')" class="text-purple-400 hover:text-purple-300 transition p-2 hover:bg-purple-900/30 rounded-full" title="Ver">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                                </svg>
                            </button>
                            <a href="img/info1.png" download="Conceptos-y-Datos.png" class="text-purple-400 hover:text-purple-300 transition p-2 hover:bg-purple-900/30 rounded-full" title="Descargar">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                                </svg>
                            </a>
                            <button type="button" onclick="shareImage('img/info1.png', 'Conceptos y Datos')" class="text-purple-400 hover:text-purple-300 transition p-2 hover:bg-purple-900/30 rounded-full" title="Compartir">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 2: Info 2 -->
                <div class="glass-panel rounded-2xl overflow-hidden shadow-2xl hover:shadow-pink-500/50 transition-all duration-500 transform hover:-translate-y-2 reveal-element delay-100">
                    <div class="h-64 bg-gradient-to-br from-pink-500 to-pink-700 flex items-center justify-center cursor-pointer overflow-hidden group" onclick="openMediaModal('img/info2.png')">
                        <img src="img/info2.png" alt="Infografía 2" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500">
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-3 text-white">Causas y Consecuencias</h3>
                        <p class="text-gray-400 text-sm mb-4">Análisis de las raíces estructurales del problema y su impacto social.</p>
                        <div class="flex items-center justify-center gap-4">
                            <button type="button" onclick="openMediaModal('img/info2.png')" class="text-pink-400 hover:text-pink-300 transition p-2 hover:bg-pink-900/30 rounded-full" title="Ver">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                            </button>
                            <a href="img/info2.png" download class="text-pink-400 hover:text-pink-300 transition p-2 hover:bg-pink-900/30 rounded-full" title="Descargar">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                            </a>
                            <button type="button" onclick="shareImage('img/info2.png', 'Causas y Consecuencias')" class="text-pink-400 hover:text-pink-300 transition p-2 hover:bg-pink-900/30 rounded-full" title="Compartir">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 3: Info 3 -->
                <div class="glass-panel rounded-2xl overflow-hidden shadow-2xl hover:shadow-indigo-500/50 transition-all duration-500 transform hover:-translate-y-2 reveal-element delay-200">
                    <div class="h-64 bg-gradient-to-br from-indigo-500 to-indigo-700 flex items-center justify-center cursor-pointer overflow-hidden group" onclick="openMediaModal('img/info3.png')">
                        <img src="img/info3.png" alt="Infografía 3" class="w-full h-full object-cover opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500">
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-3 text-white">Rutas de Ayuda</h3>
                        <p class="text-gray-400 text-sm mb-4">Estrategias de prevención, protocolos de atención y directorio telefónico.</p>
                        <div class="flex items-center justify-center gap-4">
                            <button type="button" onclick="openMediaModal('img/info3.png')" class="text-indigo-400 hover:text-indigo-300 transition p-2 hover:bg-indigo-900/30 rounded-full" title="Ver">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                            </button>
                            <a href="img/info3.png" download class="text-indigo-400 hover:text-indigo-300 transition p-2 hover:bg-indigo-900/30 rounded-full" title="Descargar">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                            </a>
                            <button type="button" onclick="shareImage('img/info3.png', 'Rutas de Ayuda')" class="text-indigo-400 hover:text-indigo-300 transition p-2 hover:bg-indigo-900/30 rounded-full" title="Compartir">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 4: Ensayo -->
                <div class="glass-panel rounded-2xl overflow-hidden shadow-2xl hover:shadow-teal-500/50 transition-all duration-500 transform hover:-translate-y-2 reveal-element delay-300">
                    <div class="h-64 bg-gradient-to-br from-teal-500 to-teal-700 flex items-center justify-center cursor-pointer overflow-hidden group" onclick="openMediaModal('img/ensayo.pdf')">
                        <svg class="w-32 h-32 text-white opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-3 text-white">Ensayo Académico</h3>
                        <p class="text-gray-400 text-sm mb-4">"Deconstruyendo el silencio" - Análisis profundo sobre violencia de género.</p>
                        <div class="flex items-center justify-center gap-4">
                            <button type="button" onclick="openMediaModal('img/ensayo.pdf')" class="text-teal-400 hover:text-teal-300 transition p-2 hover:bg-teal-900/30 rounded-full" title="Ver">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
                            </button>
                            <a href="img/ensayo.pdf" download class="text-teal-400 hover:text-teal-300 transition p-2 hover:bg-teal-900/30 rounded-full" title="Descargar">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/></svg>
                            </a>
                            <button type="button" onclick="shareImage('img/ensayo.pdf', 'Ensayo Académico')" class="text-teal-400 hover:text-teal-300 transition p-2 hover:bg-teal-900/30 rounded-full" title="Compartir">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/></svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Card 5: Video YouTube -->
                <div class="glass-panel rounded-2xl overflow-hidden shadow-2xl hover:shadow-orange-500/50 transition-all duration-500 transform hover:-translate-y-2 reveal-element delay-400">
                    <a href="https://youtube.com/shorts/sJobBnubhNk" target="_blank" rel="noopener noreferrer" class="block h-64 bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center cursor-pointer overflow-hidden group">
                        <svg class="w-32 h-32 text-white opacity-90 group-hover:opacity-100 group-hover:scale-110 transition-all duration-500" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path>
                        </svg>
                    </a>
                    <div class="p-6">
                        <h3 class="font-bold text-xl mb-3 text-white">Video Educativo</h3>
                        <p class="text-gray-400 text-sm mb-4">Video corto sobre violencia de género y prevención.</p>
                        <div class="flex items-center justify-center">
                            <a href="https://youtube.com/shorts/sJobBnubhNk" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-bold py-3 px-6 rounded-full transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-orange-500/50">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path>
                                </svg>
                                <span>Ver en YouTube</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECCIÓN 4: FORMULARIO PRIVADO CON AGUJERO NEGRO -->
    <section id="participa" class="py-20 px-4 text-white relative overflow-hidden" style="background: radial-gradient(ellipse at center, #0a0a1a 0%, #000002 70%);">
        <!-- Canvas del Agujero Negro -->
        <div id="blackhole-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none;"></div>
        
        <!-- Overlay oscuro para mejorar legibilidad -->
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.2); z-index: 1; pointer-events: none;"></div>
        
        <div class="max-w-2xl mx-auto relative reveal-element" style="z-index: 10; position: relative;"></div>
            <div class="text-center mb-12">
                <h2 class="text-4xl md:text-5xl font-bold mb-6 neon-text">Tu voz es el cambio</h2>
                <p class="text-lg md:text-xl text-gray-300 px-4">
                    Cuéntanos tu experiencia o propuesta para mejorar la seguridad en el campus. Es 100% anónimo.
                </p>
            </div>
            
            <form id="contact-form" action="https://formspree.io/f/mjkdzead" method="POST" class="glass-panel p-8 md:p-10 rounded-3xl shadow-2xl">
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label for="rol-select" class="block text-purple-300 text-sm font-bold mb-3">Tu rol en la universidad</label>
                        <select id="rol-select" name="rol" class="glass-input w-full px-4 py-3 rounded-xl focus:ring-2 focus:ring-purple-500 transition">
                            <option class="text-gray-900" value="Estudiante">Estudiante</option>
                            <option class="text-gray-900" value="Docente">Docente</option>
                            <option class="text-gray-900" value="Administrativo">Administrativo</option>
                            <option class="text-gray-900" value="Otro">Otro</option>
                        </select>
                    </div>
                    <div>
                        <label for="seudonimo-input" class="block text-purple-300 text-sm font-bold mb-3">Seudónimo</label>
                        <div class="relative">
                            <input type="text" id="seudonimo-input" name="seudonimo" class="glass-input w-full px-4 py-3 rounded-xl focus:ring-2 focus:ring-purple-500 transition pr-12" placeholder="Editable">
                            <button type="button" onclick="generatePseudonym()" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-400 hover:text-purple-300 transition hover:scale-110" title="Generar nuevo">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <label for="mensaje-textarea" class="block text-purple-300 text-sm font-bold mb-3">Tu Propuesta / Testimonio</label>
                    <textarea id="mensaje-textarea" name="mensaje" required class="glass-input w-full px-4 py-3 rounded-xl h-40 focus:ring-2 focus:ring-purple-500 transition resize-none" placeholder="Escribe aquí..."></textarea>
                </div>
                <button type="submit" id="submit-btn" class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 px-6 rounded-xl shadow-2xl transform transition hover:-translate-y-1 hover:shadow-purple-500/50">
                    Enviar de forma anónima
                </button>
                <p id="form-status" class="text-center mt-4 text-sm hidden"></p>
            </form>
        </div>
    </section>

    <!-- SECCIÓN 5: MURO DE PADLET -->
    <section id="muro" class="py-20 px-4 bg-gray-950 text-white relative border-t border-purple-900/30">
        <div class="max-w-6xl mx-auto relative z-10 reveal-element">
            <div class="text-center mb-12">
                <span class="text-pink-400 font-bold tracking-widest text-sm uppercase">Acción Colectiva</span>
                <h2 class="text-4xl md:text-5xl font-bold mb-4 mt-3 neon-text">Muro de Voces</h2>
                <p class="text-lg text-gray-300 px-4">
                    Un espacio público para compartir mensajes de apoyo y visibilizar la causa.
                </p>
            </div>
            
            <div class="glass-panel p-3 rounded-3xl shadow-2xl h-[600px] md:h-[700px] w-full relative overflow-hidden">
                <iframe 
                    src="https://padlet.com/embed/umkmk0pvtg4abiqj" 
                    title="Muro de Voces - Padlet"
                    frameborder="0" 
                    allow="camera;microphone;geolocation;display-capture;clipboard-write" 
                    class="w-full h-full border-none block bg-transparent rounded-2xl">
                </iframe>
                <div class="absolute bottom-4 right-6 pointer-events-none opacity-30">
                   <span class="text-xs text-white">Powered by Padlet</span>
                </div>
            </div>
            <p class="text-center text-xs text-gray-600 mt-6">Este muro es moderado públicamente.</p>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-black text-gray-500 py-8 text-center border-t border-purple-900/30 px-4">
        <div class="max-w-6xl mx-auto">
            <div class="mb-6">
                <p class="font-bold text-gray-300 text-base md:text-lg">RSU 2025 - Violencia de Género</p>
                <p class="text-sm text-gray-600 mt-2">Universidad Nacional de San Agustín de Arequipa</p>
            </div>
            
            <div class="mb-6">
                <a href="https://github.com/JOSETRA44" target="_blank" rel="noopener noreferrer" 
                   class="inline-flex items-center gap-3 text-gray-400 hover:text-purple-400 transition-all duration-300 hover:scale-105">
                    <span class="text-sm text-gray-500">Desarrollado por</span>
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"/>
                    </svg>
                    <span class="font-mono text-base font-bold">JOSETRA44</span>
                </a>
            </div>
            
            <div class="text-xs text-gray-600 flex flex-wrap justify-center gap-2 px-4">
                <span>Colla Suyo Margot</span> • 
                <span>Gutierrez Chata Daniela Aracely</span> • 
                <span>Hancco Condori Lady Ruth</span> • 
                <span>Huanaco Munoz Jose Gabriel</span> • 
                <span>Mamani Gutierrez Adolfo Cesar</span> • 
                <span>Pari Molina Heyson Servet</span>
            </div>
        </div>
    </footer>

    <!-- MODAL INTELIGENTE -->
    <div id="mediaModal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/95 backdrop-blur-sm p-4 transition-opacity duration-300" onclick="closeMediaModal()">
        <button type="button" class="absolute top-6 right-6 text-white text-6xl hover:text-purple-400 transition-all hover:scale-110 z-50" onclick="closeMediaModal()" aria-label="Cerrar">&times;</button>
        
        <div class="relative w-full h-full max-w-6xl max-h-[90vh] flex items-center justify-center" onclick="event.stopPropagation()">
            <img id="modalImg" src="" alt="Recurso educativo" class="hidden max-w-full max-h-full rounded-2xl shadow-2xl object-contain">
            <iframe id="modalPdf" src="" title="Documento PDF" class="hidden w-full h-full rounded-2xl shadow-2xl border-2 border-purple-500/30 bg-white"></iframe>
        </div>
    </div>

    <!-- SCRIPTS MEJORADOS -->
    <script type="module">
        // ========================================
        // 0. THREE.JS - FONDO 3D INTERACTIVO
        // ========================================
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

        let scene, camera, renderer, composer;
        let particleLayers = [];
        let time = 0;
        const mouse = new THREE.Vector3(0, 0, 0);
        const targetMouse = new THREE.Vector3(0, 0, 0);
        const mouseRadius = 40;
        let ripples = [];
        let isThreeActive = true;

        const layersConfig = [
            {
                count: 15000,
                size: 0.3,
                colorRange: { hue: [0.75, 0.9], sat: [0.7, 1], light: [0.5, 0.7] },
                rotationSpeed: 0.001
            },
            {
                count: 20000,
                size: 0.2,
                colorRange: { hue: [0.45, 0.6], sat: [0.6, 0.8], light: [0.4, 0.6] },
                rotationSpeed: 0.0005
            }
        ];

        function createParticleSystem(config) {
            const geometry = new THREE.BufferGeometry();
            const positions = new Float32Array(config.count * 3);
            const colors = new Float32Array(config.count * 3);
            const basePositions = new Float32Array(config.count * 3);
            const baseColors = new Float32Array(config.count * 3);

            for (let i = 0; i < config.count; i++) {
                const i3 = i * 3;
                const radius = 25 + Math.random() * 30;
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);

                const x = radius * Math.sin(phi) * Math.cos(theta);
                const y = radius * Math.sin(phi) * Math.sin(theta);
                const z = radius * Math.cos(phi);

                positions[i3] = basePositions[i3] = x;
                positions[i3 + 1] = basePositions[i3 + 1] = y;
                positions[i3 + 2] = basePositions[i3 + 2] = z;

                const dist = Math.sqrt(x * x + y * y + z * z) / 55;
                const hue = THREE.MathUtils.lerp(config.colorRange.hue[0], config.colorRange.hue[1], dist);
                const sat = THREE.MathUtils.lerp(config.colorRange.sat[0], config.colorRange.sat[1], dist);
                const light = THREE.MathUtils.lerp(config.colorRange.light[0], config.colorRange.light[1], dist);

                const color = new THREE.Color().setHSL(hue, sat, light);
                colors[i3] = baseColors[i3] = color.r;
                colors[i3 + 1] = baseColors[i3 + 1] = color.g;
                colors[i3 + 2] = baseColors[i3 + 2] = color.b;
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

            const material = new THREE.PointsMaterial({
                size: config.size,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending,
                depthWrite: false,
                sizeAttenuation: true
            });

            const points = new THREE.Points(geometry, material);
            points.userData = {
                velocities: new Float32Array(config.count * 3),
                basePositions,
                baseColors,
                colorVelocities: new Float32Array(config.count * 3),
                rotationSpeed: config.rotationSpeed
            };

            return points;
        }

        function createRipple(x, y) {
            ripples.push({
                x, y, radius: 0, strength: 2.5,
                maxRadius: mouseRadius * 4, speed: 4,
                color: new THREE.Color(0xffffff)
            });
        }

        function initThree() {
            const container = document.getElementById('canvas-container');
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x020108, 0.008);

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 100;

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0x020108, 0);
            container.appendChild(renderer.domElement);

            const renderScene = new RenderPass(scene, camera);
            const bloomPass = new UnrealBloomPass(
                new THREE.Vector2(window.innerWidth, window.innerHeight),
                1.5, 0.4, 0.85
            );
            bloomPass.threshold = 0;
            bloomPass.strength = 1.2;
            bloomPass.radius = 0.5;

            composer = new EffectComposer(renderer);
            composer.addPass(renderScene);
            composer.addPass(bloomPass);

            layersConfig.forEach(config => {
                const particles = createParticleSystem(config);
                particleLayers.push(particles);
                scene.add(particles);
            });

            document.addEventListener('mousemove', onThreeMouseMove);
            document.addEventListener('click', onThreeClick);
            window.addEventListener('resize', onThreeResize);
            
            // Pausar cuando sale del hero
            setupThreeScrollPause();
        }

        function updateParticles() {
            if (!isThreeActive) return;
            
            mouse.lerp(targetMouse, 0.05);
            ripples = ripples.filter(r => {
                r.radius += r.speed;
                r.strength *= 0.96;
                return r.radius < r.maxRadius;
            });

            particleLayers.forEach(layer => {
                const positions = layer.geometry.attributes.position.array;
                const colors = layer.geometry.attributes.color.array;
                const { velocities, basePositions, baseColors, colorVelocities } = layer.userData;

                for (let i = 0; i < positions.length / 3; i++) {
                    const i3 = i * 3;
                    const px = positions[i3], py = positions[i3 + 1], pz = positions[i3 + 2];

                    let totalForce = new THREE.Vector3();
                    let colorShift = new THREE.Vector3();

                    const mouseDist = mouse.distanceTo(new THREE.Vector3(px, py, pz));
                    if (mouseDist < mouseRadius) {
                        const strength = (1 - mouseDist / mouseRadius) * 0.1;
                        totalForce.add(new THREE.Vector3(px, py, pz).sub(mouse).normalize().multiplyScalar(strength));
                        const intensity = (1 - mouseDist / mouseRadius) * 0.8;
                        colorShift.set(intensity, intensity, intensity);
                    }

                    ripples.forEach(r => {
                        const dist = Math.sqrt((r.x - px) ** 2 + (r.y - py) ** 2);
                        const width = 15;
                        if (Math.abs(dist - r.radius) < width) {
                            const falloff = 1 - Math.abs(dist - r.radius) / width;
                            totalForce.add(new THREE.Vector3(px, py, pz).sub(new THREE.Vector3(r.x, r.y, pz)).normalize().multiplyScalar(r.strength * falloff * 0.1));
                            colorShift.add(new THREE.Vector3(r.color.r, r.color.g, r.color.b).multiplyScalar(falloff * r.strength));
                        }
                    });

                    velocities[i3] += totalForce.x + (basePositions[i3] - px) * 0.02;
                    velocities[i3 + 1] += totalForce.y + (basePositions[i3 + 1] - py) * 0.02;
                    velocities[i3 + 2] += totalForce.z + (basePositions[i3 + 2] - pz) * 0.02;

                    velocities[i3] *= 0.94;
                    velocities[i3 + 1] *= 0.94;
                    velocities[i3 + 2] *= 0.94;

                    positions[i3] += velocities[i3];
                    positions[i3 + 1] += velocities[i3 + 1];
                    positions[i3 + 2] += velocities[i3 + 2];

                    colorVelocities[i3] += colorShift.x + (baseColors[i3] - colors[i3]) * 0.05;
                    colorVelocities[i3 + 1] += colorShift.y + (baseColors[i3 + 1] - colors[i3 + 1]) * 0.05;
                    colorVelocities[i3 + 2] += colorShift.z + (baseColors[i3 + 2] - colors[i3 + 2]) * 0.05;

                    colorVelocities[i3] *= 0.9;
                    colorVelocities[i3 + 1] *= 0.9;
                    colorVelocities[i3 + 2] *= 0.9;

                    colors[i3] += colorVelocities[i3];
                    colors[i3 + 1] += colorVelocities[i3 + 1];
                    colors[i3 + 2] += colorVelocities[i3 + 2];
                }

                layer.geometry.attributes.position.needsUpdate = true;
                layer.geometry.attributes.color.needsUpdate = true;
            });
        }

        function animateThree() {
            requestAnimationFrame(animateThree);
            if (!isThreeActive) return;
            
            time += 0.01;
            updateParticles();

            particleLayers.forEach(layer => {
                layer.rotation.y += layer.userData.rotationSpeed;
                layer.rotation.x = Math.sin(time * 0.1) * 0.05;
            });

            camera.position.x = Math.sin(time * 0.2) * 2;
            camera.position.y = Math.cos(time * 0.3) * 2;
            camera.lookAt(scene.position);

            composer.render();
        }

        function onThreeMouseMove(event) {
            targetMouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            targetMouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            const vector = new THREE.Vector3(targetMouse.x, targetMouse.y, 0.5);
            vector.unproject(camera);
            const dir = vector.sub(camera.position).normalize();
            const distance = -camera.position.z / dir.z;
            targetMouse.copy(camera.position.clone().add(dir.multiplyScalar(distance)));
        }

        function onThreeClick(event) {
            const clickMouse = new THREE.Vector2(
                (event.clientX / window.innerWidth) * 2 - 1,
                -(event.clientY / window.innerHeight) * 2 + 1
            );
            const vector = new THREE.Vector3(clickMouse.x, clickMouse.y, 0.5);
            vector.unproject(camera);
            const dir = vector.sub(camera.position).normalize();
            const distance = -camera.position.z / dir.z;
            const pos = camera.position.clone().add(dir.multiplyScalar(distance));
            createRipple(pos.x, pos.y);
        }

        function onThreeResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            composer.setSize(window.innerWidth, window.innerHeight);
        }

        function setupThreeScrollPause() {
            const heroSection = document.querySelector('header');
            window.addEventListener('scroll', () => {
                if (heroSection) {
                    const rect = heroSection.getBoundingClientRect();
                    isThreeActive = rect.bottom > 0 && rect.top < window.innerHeight;
                }
            }, { passive: true });
        }

        // Iniciar Three.js
        initThree();
        animateThree();
    </script>

    <!-- BLACK HOLE BACKGROUND SCRIPT -->
    <script type="module">
        import * as THREE from 'three';
        import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
        import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
        import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';
        import { ShaderPass } from 'three/addons/postprocessing/ShaderPass.js';

        const BLACK_HOLE_RADIUS = 1.3;
        const DISK_INNER_RADIUS = BLACK_HOLE_RADIUS + 0.2;
        const DISK_OUTER_RADIUS = 8.0;
        const DISK_TILT_ANGLE = Math.PI / 3.0;

        let bhScene, bhCamera, bhRenderer, bhComposer;
        let accretionDisk, eventHorizon, blackHoleMesh, stars;
        let isBlackHoleActive = false;

        function initBlackHole() {
            const container = document.getElementById('blackhole-container');
            if (!container) return;

            bhScene = new THREE.Scene();
            bhScene.fog = new THREE.FogExp2(0x020104, 0.025);

            bhCamera = new THREE.PerspectiveCamera(60, container.clientWidth / container.clientHeight, 0.1, 4000);
            bhCamera.position.set(-6.5, 5.0, 6.5);

            bhRenderer = new THREE.WebGLRenderer({ antialias: true, alpha: true, powerPreference: "high-performance" });
            bhRenderer.setSize(container.clientWidth, container.clientHeight);
            bhRenderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
            bhRenderer.outputColorSpace = THREE.SRGBColorSpace;
            bhRenderer.toneMapping = THREE.ACESFilmicToneMapping;
            bhRenderer.toneMappingExposure = 1.2;
            bhRenderer.domElement.style.pointerEvents = 'none';
            container.appendChild(bhRenderer.domElement);

            bhComposer = new EffectComposer(bhRenderer);
            bhComposer.addPass(new RenderPass(bhScene, bhCamera));
            
            const bloomPass = new UnrealBloomPass(
                new THREE.Vector2(container.clientWidth, container.clientHeight),
                0.8, 0.7, 0.8
            );
            bhComposer.addPass(bloomPass);

            // Estrellas
            const starGeometry = new THREE.BufferGeometry();
            const starCount = 80000;
            const starPositions = new Float32Array(starCount * 3);
            const starColors = new Float32Array(starCount * 3);
            const starSizes = new Float32Array(starCount);
            const starTwinkle = new Float32Array(starCount);
            const starFieldRadius = 2000;
            const starPalette = [
                new THREE.Color(0x88aaff), new THREE.Color(0xffaaff), new THREE.Color(0xaaffff),
                new THREE.Color(0xffddaa), new THREE.Color(0xffeecc), new THREE.Color(0xffffff),
                new THREE.Color(0xff8888), new THREE.Color(0x88ff88), new THREE.Color(0xffff88)
            ];

            for (let i = 0; i < starCount; i++) {
                const i3 = i * 3;
                const phi = Math.acos(-1 + (2 * i) / starCount);
                const theta = Math.sqrt(starCount * Math.PI) * phi;
                const radius = Math.cbrt(Math.random()) * starFieldRadius + 100;

                starPositions[i3] = radius * Math.sin(phi) * Math.cos(theta);
                starPositions[i3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
                starPositions[i3 + 2] = radius * Math.cos(phi);

                const starColor = starPalette[Math.floor(Math.random() * starPalette.length)].clone();
                starColor.multiplyScalar(Math.random() * 0.7 + 0.3);
                starColors[i3] = starColor.r; starColors[i3 + 1] = starColor.g; starColors[i3 + 2] = starColor.b;
                starSizes[i] = THREE.MathUtils.randFloat(0.6, 3.0);
                starTwinkle[i] = Math.random() * Math.PI * 2;
            }
            starGeometry.setAttribute('position', new THREE.BufferAttribute(starPositions, 3));
            starGeometry.setAttribute('color', new THREE.BufferAttribute(starColors, 3));
            starGeometry.setAttribute('size', new THREE.BufferAttribute(starSizes, 1));
            starGeometry.setAttribute('twinkle', new THREE.BufferAttribute(starTwinkle, 1));

            const starMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    uTime: { value: 0 },
                    uPixelRatio: { value: bhRenderer.getPixelRatio() }
                },
                vertexShader: `
                    uniform float uTime;
                    uniform float uPixelRatio;
                    attribute float size;
                    attribute float twinkle;
                    varying vec3 vColor;
                    varying float vTwinkle;
                    
                    void main() {
                        vColor = color;
                        vTwinkle = sin(uTime * 2.5 + twinkle) * 0.5 + 0.5;
                        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                        gl_PointSize = size * uPixelRatio * (300.0 / -mvPosition.z);
                        gl_Position = projectionMatrix * mvPosition;
                    }
                `,
                fragmentShader: `
                    varying vec3 vColor;
                    varying float vTwinkle;
                    
                    void main() {
                        float dist = distance(gl_PointCoord, vec2(0.5));
                        if (dist > 0.5) discard;
                        float alpha = 1.0 - smoothstep(0.0, 0.5, dist);
                        alpha *= (0.2 + vTwinkle * 0.8);
                        gl_FragColor = vec4(vColor, alpha);
                    }
                `,
                transparent: true,
                vertexColors: true,
                blending: THREE.AdditiveBlending,
                depthWrite: false
            });

            stars = new THREE.Points(starGeometry, starMaterial);
            bhScene.add(stars);

            // Event Horizon
            const eventHorizonGeom = new THREE.SphereGeometry(BLACK_HOLE_RADIUS * 1.05, 128, 64);
            const eventHorizonMat = new THREE.ShaderMaterial({
                uniforms: {
                    uTime: { value: 0 },
                    uCameraPosition: { value: bhCamera.position }
                },
                vertexShader: `
                    varying vec3 vNormal;
                    varying vec3 vPosition;
                    void main() {
                        vNormal = normalize(normalMatrix * normal);
                        vPosition = position;
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    uniform float uTime;
                    uniform vec3 uCameraPosition;
                    varying vec3 vNormal;
                    varying vec3 vPosition;
                    
                    void main() {
                        vec3 viewDirection = normalize(uCameraPosition - vPosition);
                        float fresnel = 1.0 - abs(dot(vNormal, viewDirection));
                        fresnel = pow(fresnel, 2.5);
                        vec3 glowColor = vec3(1.0, 0.4, 0.1);
                        float pulse = sin(uTime * 2.5) * 0.15 + 0.85;
                        gl_FragColor = vec4(glowColor * fresnel * pulse, fresnel * 0.4);
                    }
                `,
                transparent: true,
                blending: THREE.AdditiveBlending,
                side: THREE.BackSide
            });

            eventHorizon = new THREE.Mesh(eventHorizonGeom, eventHorizonMat);
            bhScene.add(eventHorizon);

            // Black Hole Core
            const blackHoleGeom = new THREE.SphereGeometry(BLACK_HOLE_RADIUS, 128, 64);
            const blackHoleMat = new THREE.MeshBasicMaterial({ color: 0x000000 });
            blackHoleMesh = new THREE.Mesh(blackHoleGeom, blackHoleMat);
            bhScene.add(blackHoleMesh);

            // Accretion Disk
            const diskGeometry = new THREE.RingGeometry(DISK_INNER_RADIUS, DISK_OUTER_RADIUS, 256, 128);
            const diskMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    uTime: { value: 0.0 },
                    uColorHot: { value: new THREE.Color(0xffffff) },
                    uColorMid1: { value: new THREE.Color(0xff7733) },
                    uColorMid2: { value: new THREE.Color(0xff4477) },
                    uColorMid3: { value: new THREE.Color(0x7744ff) },
                    uColorOuter: { value: new THREE.Color(0x4477ff) },
                    uNoiseScale: { value: 2.5 },
                    uFlowSpeed: { value: 0.22 },
                    uDensity: { value: 1.3 }
                },
                vertexShader: `
                    varying vec2 vUv;
                    varying float vRadius;
                    varying float vAngle;
                    void main() {
                        vUv = uv;
                        vRadius = length(position.xy);
                        vAngle = atan(position.y, position.x);
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    uniform float uTime;
                    uniform vec3 uColorHot;
                    uniform vec3 uColorMid1;
                    uniform vec3 uColorMid2;
                    uniform vec3 uColorMid3;
                    uniform vec3 uColorOuter;
                    uniform float uNoiseScale;
                    uniform float uFlowSpeed;
                    uniform float uDensity;
                    varying vec2 vUv;
                    varying float vRadius;
                    varying float vAngle;

                    float random(vec2 st) {
                        return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);
                    }

                    void main() {
                        float normalizedRadius = smoothstep(${DISK_INNER_RADIUS.toFixed(2)}, ${DISK_OUTER_RADIUS.toFixed(2)}, vRadius);
                        float spiral = vAngle * 3.0 - (1.0 / (normalizedRadius + 0.1)) * 2.0;
                        vec2 noiseUv = vec2(vUv.x + uTime * uFlowSpeed * (2.0 / (vRadius * 0.3 + 1.0)), vUv.y * 0.8);
                        float noiseVal = random(noiseUv * uNoiseScale + uTime * 0.1);
                        
                        vec3 color = uColorOuter;
                        color = mix(color, uColorMid3, smoothstep(0.0, 0.25, normalizedRadius));
                        color = mix(color, uColorMid2, smoothstep(0.2, 0.55, normalizedRadius));
                        color = mix(color, uColorMid1, smoothstep(0.5, 0.75, normalizedRadius));
                        color = mix(color, uColorHot, smoothstep(0.7, 0.95, normalizedRadius));
                        
                        color *= (0.5 + noiseVal * 1.0);
                        float brightness = pow(1.0 - normalizedRadius, 1.0) * 3.5 + 0.5;
                        brightness *= (0.3 + noiseVal * 2.2);
                        
                        float alpha = uDensity * (0.2 + noiseVal * 0.9);
                        alpha *= smoothstep(0.0, 0.15, normalizedRadius);
                        alpha *= (1.0 - smoothstep(0.85, 1.0, normalizedRadius));
                        
                        gl_FragColor = vec4(color * brightness, alpha);
                    }
                `,
                transparent: true,
                side: THREE.DoubleSide,
                depthWrite: false,
                blending: THREE.AdditiveBlending
            });

            accretionDisk = new THREE.Mesh(diskGeometry, diskMaterial);
            accretionDisk.rotation.x = DISK_TILT_ANGLE;
            bhScene.add(accretionDisk);

            // Auto-rotate camera
            setupBlackHoleScrollDetection();
        }

        function setupBlackHoleScrollDetection() {
            const participaSection = document.getElementById('participa');
            window.addEventListener('scroll', () => {
                if (participaSection) {
                    const rect = participaSection.getBoundingClientRect();
                    const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
                    
                    if (isVisible && !isBlackHoleActive) {
                        isBlackHoleActive = true;
                    } else if (!isVisible && isBlackHoleActive) {
                        isBlackHoleActive = false;
                    }
                }
            }, { passive: true });
        }

        const bhClock = new THREE.Clock();
        function animateBlackHole() {
            requestAnimationFrame(animateBlackHole);
            
            if (!isBlackHoleActive || !bhRenderer) return;
            
            const elapsedTime = bhClock.getElapsedTime();
            const deltaTime = bhClock.getDelta();

            if (accretionDisk) {
                accretionDisk.material.uniforms.uTime.value = elapsedTime;
                accretionDisk.rotation.z += deltaTime * 0.005;
            }
            
            if (stars) {
                stars.material.uniforms.uTime.value = elapsedTime;
                stars.rotation.y += deltaTime * 0.003;
                stars.rotation.x += deltaTime * 0.001;
            }
            
            if (eventHorizon) {
                eventHorizon.material.uniforms.uTime.value = elapsedTime;
                eventHorizon.material.uniforms.uCameraPosition.value.copy(bhCamera.position);
            }

            // Auto-rotate camera
            const radius = 10;
            bhCamera.position.x = Math.cos(elapsedTime * 0.1) * radius;
            bhCamera.position.z = Math.sin(elapsedTime * 0.1) * radius;
            bhCamera.position.y = 5 + Math.sin(elapsedTime * 0.05) * 2;
            bhCamera.lookAt(0, 0, 0);

            bhComposer.render(deltaTime);
        }

        window.addEventListener('resize', () => {
            const container = document.getElementById('blackhole-container');
            if (container && bhCamera && bhRenderer && bhComposer) {
                bhCamera.aspect = container.clientWidth / container.clientHeight;
                bhCamera.updateProjectionMatrix();
                bhRenderer.setSize(container.clientWidth, container.clientHeight);
                bhComposer.setSize(container.clientWidth, container.clientHeight);
            }
        });

        // Iniciar cuando el DOM esté listo
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                initBlackHole();
                animateBlackHole();
            });
        } else {
            initBlackHole();
            animateBlackHole();
        }
    </script>
    
    <script>
        // ========================================
        // 1. ANIME.JS - ANIMACIÓN DE TÍTULO OPTIMIZADA
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            const textWrappers = document.querySelectorAll('.ml2 h1');
            textWrappers.forEach(function(textWrapper) {
                textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");
            });
            
            anime.timeline({loop: false})
                .add({ 
                    targets: '.ml2 h1:first-child .letter', 
                    scale: [2, 1], 
                    opacity: [0, 1], 
                    easing: "easeOutExpo", 
                    duration: 600, 
                    delay: (el, i) => 40 * i 
                })
                .add({ 
                    targets: '.ml2 h1:last-child .letter', 
                    scale: [2, 1], 
                    opacity: [0, 1], 
                    easing: "easeOutExpo", 
                    duration: 600, 
                    delay: (el, i) => 40 * i 
                }, '-=400')
                .add({ 
                    targets: '.intro-anim', 
                    opacity: [0, 1], 
                    translateY: [20, 0], 
                    duration: 600, 
                    delay: anime.stagger(100), 
                    easing: 'easeOutCubic' 
                }, '-=300');
            
            // Iniciar efecto typewriter después de las animaciones
            setTimeout(() => {
                typeWriter();
            }, 2000);
        });

        // ========================================
        // 1.5 EFECTO MÁQUINA DE ESCRIBIR
        // ========================================
        function typeWriter() {
            const text = "Desmantelando las estructuras invisibles de desigualdad en la universidad.";
            const typedTextElement = document.querySelector('.typed-text');
            let charIndex = 0;
            
            function type() {
                if (charIndex < text.length) {
                    typedTextElement.textContent += text.charAt(charIndex);
                    charIndex++;
                    setTimeout(type, 50); // Velocidad de escritura (50ms por carácter)
                }
            }
            
            type();
        }

        // ========================================
        // 2. INTERSECTION OBSERVER - SCROLL REVEAL
        // ========================================
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);
        
        document.querySelectorAll('.reveal-element').forEach((el) => observer.observe(el));

        // ========================================
        // 4. FORMSPREE - MANEJO DE FORMULARIO
        // ========================================
        const form = document.getElementById("contact-form");
        
        async function handleSubmit(event) {
            event.preventDefault();
            const status = document.getElementById("form-status");
            const btn = document.getElementById("submit-btn");
            const data = new FormData(event.target);
            
            btn.disabled = true;
            btn.innerHTML = '<span class="flex items-center justify-center gap-2"><svg class="animate-spin h-5 w-5" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Enviando...</span>';
            
            try {
                const response = await fetch(event.target.action, {
                    method: form.method,
                    body: data,
                    headers: { 'Accept': 'application/json' }
                });
                
                if (response.ok) {
                    status.innerHTML = "✓ ¡Gracias! Tu testimonio ha sido guardado.";
                    status.classList.remove('hidden', 'text-red-500');
                    status.classList.add('text-green-400', 'font-bold');
                    form.reset();
                    generatePseudonym();
                    btn.innerHTML = "Enviado ✔";
                    
                    setTimeout(() => {
                        btn.disabled = false;
                        btn.innerHTML = "Enviar de forma anónima";
                        status.classList.add('hidden');
                    }, 5000);
                } else {
                    throw new Error('Error en el envío');
                }
            } catch(error) {
                status.innerHTML = "✗ Hubo un error. Intenta de nuevo.";
                status.classList.remove('hidden');
                status.classList.add('text-red-500');
                btn.disabled = false;
                btn.innerHTML = "Intentar de nuevo";
            }
        }
        
        form.addEventListener("submit", handleSubmit);

        // ========================================
        // 5. MODAL INTELIGENTE (PDF/IMAGEN)
        // ========================================
        function openMediaModal(fileUrl) {
            const modal = document.getElementById('mediaModal');
            const imgElement = document.getElementById('modalImg');
            const pdfElement = document.getElementById('modalPdf');
            
            if (fileUrl.toLowerCase().endsWith('.pdf')) {
                imgElement.classList.add('hidden');
                pdfElement.classList.remove('hidden');
                pdfElement.src = fileUrl;
            } else {
                pdfElement.classList.add('hidden');
                imgElement.classList.remove('hidden');
                imgElement.src = fileUrl;
            }
            
            modal.classList.remove('hidden');
            modal.classList.add('open');
            document.body.style.overflow = 'hidden';
        }

        function closeMediaModal() {
            const modal = document.getElementById('mediaModal');
            const imgElement = document.getElementById('modalImg');
            const pdfElement = document.getElementById('modalPdf');
            
            modal.classList.remove('open');
            document.body.style.overflow = 'auto';
            
            setTimeout(() => {
                modal.classList.add('hidden');
                imgElement.src = '';
                pdfElement.src = '';
            }, 300);
        }
        
        document.addEventListener('keydown', function(event) { 
            if (event.key === "Escape") closeMediaModal(); 
        });

        // ========================================
        // 6. FUNCIÓN DE COMPARTIR
        // ========================================
        async function shareImage(imageUrl, title) {
            const fullUrl = window.location.origin + '/' + imageUrl;
            
            if (navigator.share) {
                try {
                    await navigator.share({
                        title: title + ' - Violencia de Género',
                        text: 'Infografía sobre violencia de género en la universidad',
                        url: fullUrl
                    });
                } catch (error) {
                    if (error.name !== 'AbortError') {
                        fallbackShare(fullUrl);
                    }
                }
            } else {
                fallbackShare(fullUrl);
            }
        }

        function fallbackShare(url) {
            navigator.clipboard.writeText(url).then(() => {
                showNotification('¡Enlace copiado al portapapeles!');
            }).catch(() => {
                prompt('Copia este enlace para compartir:', url);
            });
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed bottom-4 right-4 bg-purple-600 text-white px-6 py-3 rounded-lg shadow-2xl z-50 animate-bounce';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }

        // ========================================
        // 7. GENERADOR DE SEUDÓNIMOS
        // ========================================
        const adjetivos = [
            'Valiente', 'Fuerte', 'Libre', 'Audaz', 'Resiliente', 
            'Firme', 'Decidido', 'Intrépido', 'Sereno', 'Brillante',
            'Luminoso', 'Eterno', 'Infinito', 'Cósmico', 'Estelar'
        ];
        
        const sustantivos = [
            'Viento', 'Luz', 'Estrella', 'Fénix', 'Águila', 
            'Montaña', 'Océano', 'Rayo', 'Luna', 'Sol',
            'Cometa', 'Nebulosa', 'Galaxia', 'Cosmos', 'Aurora'
        ];
        
        function generatePseudonym() {
            const adj = adjetivos[Math.floor(Math.random() * adjetivos.length)];
            const sust = sustantivos[Math.floor(Math.random() * sustantivos.length)];
            const num = Math.floor(Math.random() * 999);
            const pseudonym = adj + sust + num;
            document.getElementById('seudonimo-input').value = pseudonym;
        }
        
        // Generar seudónimo al cargar
        window.addEventListener('DOMContentLoaded', function() {
            generatePseudonym();
        });

        // ========================================
        // 8. SMOOTH SCROLL
        // ========================================
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if(target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ========================================
        // 9. ANIMACIÓN DE FADEOUT
        // ========================================
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // ========================================
        // 10. CONSOLE LOG PERSONALIZADO
        // ========================================
        console.log('%c🚀 RSU - Violencia de Género', 'color: #9333ea; font-size: 20px; font-weight: bold;');
        console.log('%cDesarrollado con ❤️ por JOSETRA44', 'color: #ec4899; font-size: 14px;');
        console.log('%cEstilo inspirado en el Explorador de Agujeros Negros', 'color: #3b82f6; font-size: 12px;');
    </script>
</body>
</html>
